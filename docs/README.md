# 개발 문서

## 구현 목록

- 구매로또 지불 처리
    - 구입 금액 입력안내메시지 출력
    - 구입 금액을 숫자로 입력받는 기능
- 구매로또 생성 처리
    - 구매 장 수에 따라 생성
    - 구매한 장 수 확인메시지 출력
    - 생성된 로또 장 별로 출력
- 정답번호 생성 처리
    - 정답번호 입력 안내 메시지 출력
    - 정답번호 6자리 입력
    - 보너스번호 입력 안내 메시지 출력
    - 보너스번호 1자리 입력
- 정답번호 추첨 처리
    - 정답번호와 추측번호를 맞추어 결과를 누적
    - 누적된 결과를 토대로 각 등수 별 당첨 갯수를 연산
    - 누적된 결과를 토대로 각 당첨액수를 합산
    - 구입금액 대비 당첨금액을 비교하여 수익률 계산
    - 위 연산 결과들을 포맷에 맞게 당첨통계 안내메시지 출력

(종료)

### 구현 기능 목록

### 예외 처리 목록

- [x] 입력값이 형식을 벗어나는 경우(입력받는 값은 전부 숫자임을 참고)
- [x] 입력한 가격이 1000원 단위가 아닌 경우
- [x] 입력한 가격이 1000 ~ 100000원을 벗어나는 경우
- [x] 입력된 추측번호가 6개가 아닌 경우
- [x] 정답/추측번호의 범위가 1~45를 벗어나는 경우
- [x] 추측번호가 중복되는 경우
- [x] 정답번호 + 보너스숫자가 중복되는 경우

## 참고할 점

### 참고 용어/개념 설명

- 장 : 로또 한 줄(6개의 번호)를 부르는 단위
- 정답번호 : 당첨 기준이 되는 로또 번호 6자리와 보너스 번호 1자리짜리 로또
- 추측번호 : 정답 로또 번호를 맞추기 위해 사용자가 구매한 로또 번호 6자리짜리 로또
- 구매로또 : 말 그대로 구매한 로또들. 1개 이상으로 이루어진 추측번호의 목록을 가지고 있음.

### 체크리스트

- [x] 브랜치 분리 확인
- [ ] 메서드 길이 최대 15라인
- [ ] 둘째 자리 반올림 처리 잘 되는지 확실히 확인
- [ ] Enum 사용할 것
- [ ] Console, Randoms 라이브러리만 사용
- [ ] 도메인 로직 단위테스트 추가
- [ ] 주어진 Lotto 클래스의 numbers 필드를 변경할 수 없다. 새로운 필드 추가도 불가능하다. 패키지 변경은 가능하다. 추가 기능 구현은 가능하다.
- [ ] 구현 완료 후 기본 요구사항 3가지 충족여부 반드시 확인
- [ ] 제출 전 테스트 수행 결과 확인

### 모래주머니

- 도메인 로직 단위테스트 가능한 모든 시나리오 추가하기
- 필수 요구사항에 없는 더 복잡한 도메인 기능 떠올리기(적용할 수 있는 것은 적용)
- 기능 구현과 테스트 작성의 텀 최소한으로 하기
- 의존성 주입 적극 활용 및 실행코드와 연관관계 분리 해결책 낼 것
- 하나의 개념이라도 분리할 수 있는 이유를 떠올려보고, 분리할 이유가 있다면 분리해보기

## 고민 & 생각 메모

### 2023-11-04

- 클래스 분리를 극한까지 해보자. 모래주머니 차고 극한까지 리팩토링 해볼 것.
    - 기존에는 '나눠지는게 좋겠다고 생각한 부분'이어도 '지금 필요할까?'를 고려해서 나누지 않고는 했는데, 이번에는 나눠야겠다고 생각이 드는 부분들은 극한까지 나눠보기로 한다.
- 이전에 '공통기능'이라고 생각하며 분리하여 개발했던 클래스를 그대로 재사용할 수 있는지 확인.
    - 만약 정말 범용적으로 개발한 기능들이 아니었다면, 재사용 할 수 없을 것임. 재사용이 가능할 정도로 경우의 수를 생각해서 리팩토링 할 것.
- 예외 처리가 평소와 다르다. 앱 종료가 아닌 재시도. 어떻게 할 것인가?

### 2023-11-07

- LottoGameView의 메서드를 대폭 갈아치우면서 테스트 코드의 강력함을 느꼈다.
    - 일일히 실행해서 입력값을 넣으며 테스트 할 필요가 없으니까 정말 빠르고, 그리고 입력값 중에서 예외적인 사항까지 하나하나 고려할 필요없이 오히려 내가 직접 하는 것보다도 더 정확하게(물론 테스트도 내가
      짠거지만, 어쨌든 코드는 자신이 수행되는 것을 까먹지않으니까...) 검증한다는 생각에 굉장히 심신이 편안하다. 좋다. 테스트 코드의 묘미를 조금 알게된 것 같다.
    - 테스트 작성 시기에 대해서도 조금 생각이 생겼다. TDD까지는 아직도 잘 모르겠다. 하지만 리팩토링 보다는 무조건 이전이어야 한다. 딱 나눠떨어지지는 않지만, 과정을 나눠보자면 최소한 이런 순서여야
      한다. "기능 개발 -> 테스트 코드 -> 리팩토링"
- 지저분한 중복 예외처리 로직을 개선할 수 있을 거라고 생각했고 실제로 되었다.
    - 나는 어떤 부분에서 가능할 거라고 느꼈던 걸까? 판단이라고 하기에는 떠오르는 근거가 없었음에도 지나치게 확신했던 것 같다. 왜 될 거라고 생각했을까? 어떤 부분이 나에게 가능하다는 뉘앙스를 주었을까?
      찾아두면, 다음에는 빠르게 판단을 할 수 있는... 좋은 힌트를 하나 더 갖게 될 것 같다.